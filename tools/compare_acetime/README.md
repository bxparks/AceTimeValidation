# Compare with AceTime

Generate the validation data using the
[AceTime](https://github.com/bxparks/AceTime) library for Arduino. Normally the
resulting `validation_data.json` file is consumed by the corresponding AUnit
test (i.e. `AceTimeBasicTest/`, `AceTimeExtendedTest/`) under the
[tests](../../tests) directory. However, since all such tests use the data from
AceTime as the baseline, this would just compare AceTime with itself. Instead,
this program is intended to be used by the [validation](../../validation/)
targets for peer-to-peer comparisons.

The program reads the `zones.txt` file (generated by the `tzcompiler.py`
program) which contains the list of zones supported by zoneinfo files in
`src/ace_time/zonedb/` and `src/ace_time/zonedbx`. This program then generates a
test data set of all DST transitions, the epoch seconds, and the expected
date/time components using the AceTime library. Since AceTime is an Arduino
library, we use the [EpoxyDuino](https://github.com/bxparks/EpoxyDuino)
environment to run this program under Linux.

## Compiling

I have tested this Ubuntu 20.04, and 22.04. Install the following as sibling
directories:

* [EpoxyDuino](https://github.com/bxparks/EpoxyDuino)
* [AceTimeValidation](https://github.com/bxparks/AceTimeValidation)
* [AceTime](https://github.com/bxparks/AceTime)

Then use GNU Make to generate `compare_acetime.out`:

```
$ cd AceTimeValidation/tools/compare_acetime
$ make
$ ./compare_acetime < zones.txt > validation_data.json
```
